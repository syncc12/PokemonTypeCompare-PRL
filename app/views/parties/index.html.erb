<div class="container-fluid">
  <div class="row">
    <div class="col-1">
      <div id="moves-holder">
        moves
      </div>
    </div>
  </div>

  
  <div class="row">

    <!-- Search Pokemon Start -->
    <div class="col-1 offset-3">
      <input id="input-pokemon" type="text" placeholder="Search Pokemon..."></input>
    </div>
    <!-- Search Pokemon End -->

    <!-- Search Moves Start -->
    <div class="col-1 offset-5">
      <input id="input-moves" type="text" placeholder="Search Moves..."></input>
    </div>
    <!-- Search Moves End -->


  </div>
  <br />
  
  <div class="row">

    <!-- Party Box Start -->
    <div class="col-2">
      <div class="party-box-outer">
        <div id="party-box-1" class="party-box std-lb"></div>
      </div>
      <div class="party-box-outer">
        <div id="party-box-2" class="party-box std-lb"></div>
      </div>
      <div class="party-box-outer">
        <div id="party-box-3" class="party-box std-lb"></div>
      </div>
      <div class="party-box-outer">
        <div id="party-box-4" class="party-box std-lb"></div>
      </div>
      <div class="party-box-outer">
        <div id="party-box-5" class="party-box std-lb"></div>
      </div>
      <div class="party-box-outer">
        <div id="party-box-6" class="party-box std-lb"></div>
      </div>
      
      <!-- Save Party Start -->
      <input id="save-party-button" class="poke-button" type="button" onclick="" value="Save Party" />
      <!-- Pokemon.create( pokedex_number: pmNum, name: pmName, type1: pmType1, type2: pmType2, sprite: pmSprite ) -->
      
      <!-- Save Party End -->

    </div>
    <!-- Party Box End -->

    
    
    <!-- Pokemon Box Start -->
    <div class="col-2 offset-1">
      <div id="moves-poke-box">
        <ol id="moves-poke-box-ol" class="list-unstyled">
          
        </ol>
      </div>
    </div>
    <!-- Pokemon Box End -->

    <!-- Add To Party Box Start -->
    <div class="col-2 offset-1">
      <div id="party-box-hold"></div>
      <button disabled id="add-party-button" class="poke-button" type="button">Add To Party</button>
    </div>
    <!-- Add To Party Box End -->

    <!-- Move Box Start -->
    <div class="col-2 offset-1">
      <ul id="move-box-ul" class="list-unstyled">

      </ul>
    </div>
    <!-- Move Box End -->

  </div>


</div>



  


<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  var baseURL = "https://pokeapi.co/api/v2/";
  function getAPI(resource, name="") {
    $.get(baseURL + resource + "/" + name, function(data, status) {
      var rsrce = data['"' + resource + '"']
      console.log(rsrce)
      return rsrce
    })
  }


  function getMoves(name) {
      $.get(baseURL + "pokemon/" + name, function(data, status) {
        var moves = data["moves"];
        // console.log(moves)
        $("#moves-holder").html(moves[0]["move"]["name"]);
      })
    }
    
    function getSprite(name) {
      $.get(baseURL + "pokemon/" + name, function(data, status) {
        // console.log(baseURL + "pokemon/" + name)
        var sprite = data["sprites"]["front_default"];
        // console.log(data["sprites"]["front_default"])
        // console.log(sprite.toString())
        return sprite.toString();
      });
    }


  // Selection Process - Up To "Add To Party"
  $(function(_SelectionProcess1) {
    $.get(baseURL + "pokemon?limit=20", function(data, status) { //Max Limit: 964
      $.each(data['results'], function(index, value) {
        $.get(value['url'], function(data, status) {
          var pokemonName = data['name'];
          var pokemonSprite = data['sprites']['front_default'];
          var pokemonTypes;
          if (data['types']['length'] == 2) {
            pokemonTypes = data['types'][0]['type']['name'] + " " + data['types'][1]['type']['name'];
          } else {
            pokemonTypes = data['types'][0]['type']['name'];
          }
          
          var pokedexNumber = data['id'];
          var insertJSON = (
            '<li id="moves-poke-box-li-' + pokemonName + '" class="moves-poke-box-li">' +
              '<div id="moves-poke-box-div-' + pokemonName + '" class="moves-poke-box-div" pokemon-name="' + pokemonName + '" pokemon-type="' + pokemonTypes + '" pokedex-number="' + pokedexNumber + '">' + 
                '<div class="container-fluid">' +
                  '<div class="row">' +
                    '<div id="moves-poke-box-img" class="align-self-center">' +
                      '<div id="moves-poke-box-' + pokemonName + '">' +
                      '<img id="sprite-' + pokemonName + '" src="' + pokemonSprite + '" alt="' + pokemonName + '" />' +
                      '</div>' +
                    '</div>' +
                    '<div id="moves-poke-box-name" class="moves-poke-box-name-class align-self-center">' +
                      pokemonName +
                    '</div>' +
                    '<table id="selected-moves">' +
                      '<tr>' +
                        '<td id="selected-move-1"></td>' +
                        '<td id="selected-move-3"></td>' +
                      '</tr>' +
                      '<tr>' +
                        '<td id="selected-move-2"></td>' +
                        '<td id="selected-move-4"></td>' +
                      '</tr>' +
                    '</table>' +
                  '</div>' +
                '</div>' +
              '</div>' +
            '</li>'
          );
          $('#moves-poke-box-ol').append(insertJSON);
        });
      });

      $("#moves-poke-box-ol").selectable({
        selected: function(event, ui) {
          $('#move-box-ul').empty();
          var insertJSON = (
            '<div id="party-box-hold"><div class="container-fluid"><div class="row">' + 
              ui['selected'].innerHTML + 
            '</div></div></div>'
          );
          $('#party-box-hold').replaceWith(insertJSON);
          $('#add-party-button').trigger('partyBoxHoldChange')
          $('#party-box-hold #selected-moves, #input-moves').css('display', 'block');
          _SelectMoves();
        }
      });
    });
  });

  // Select Moves
  function _SelectMoves() {
    var baseURL = "https://pokeapi.co/api/v2/";
    var selectedName = $('#party-box-hold #moves-poke-box-name').text();
    // console.log("selectedName: " + selectedName);
    $.get(baseURL + "pokemon/" + selectedName, function(data, status) {
      $.each(data['moves'], function(index, value) {
        var moveName = value['move']['name'].replace("-"," ");
        var moveURL = value['move']['url'];
        function typeGet() { return $.get(moveURL); }
        $.when(typeGet()).done(function(data, status) {
          var moveType = data['type']['name'];
          var insertJSON = (
            '<li id="move-box-li-' + selectedName + '-' + moveName + '" class="move-box-li">' +
              '<div id="move-box-div-' + selectedName + '-' + moveName + '" class="move-box-div" pokemon-name="' + selectedName + '" move-name="' + moveName + '" move-type="' + moveType + '">' +
                '<div class="container-fluid">' +
                  '<div class="row">' +
                    '<div id="move-box-type" class="mt-' + moveType + ' std-lb-imgbox"><div id="move-box-type-inner">' + moveType + '</div></div>' +
                    '<div id="move-box-name" class="align-self-center std-lb-namebox">' + moveName + '</div>' +
                  '</div>' +
                '</div>' +
              '</div>' +
            '</li>'
            );

          $('#move-box-ul').append(insertJSON);
          
          $('#move-box-ul > li').hide();
          
          $('#move-box-ul').selectable({
            selected: function(event, ui) {
              // console.log(ui);
              var selMoveName = $(ui['selected']).find("#move-box-name").text();
              var selMoveType = $(ui['selected']).find("#move-box-type").text();
              var selMoveSplitName = selMoveName.split(" ")
              var selMoveInitials = "";
              // console.log(selMoveName);
              // console.log(selMoveType);
              // console.log(selMoveSplitName);
              
              
              for (i in selMoveSplitName) {
                selMoveInitials = selMoveInitials + " " + selMoveSplitName[i].substring(0,1)
              }
              selMoveInitials = selMoveInitials.toUpperCase().trim();
              // console.log(selMoveInitials);

              var insertJSON = '<div class="mt-small-' + selMoveType + '" move-name="' + selMoveName + '" move-type="' + selMoveType + '"><p class="p-mt-small">' + selMoveInitials + '</p></div>'
              // console.log(insertJSON);

              function isEmpty(inElement) {
                return !$.trim($(inElement).html())
              }
              function isNotEmpty(inElement) {
                return !isEmpty(inElement)
              }
              if (isEmpty('#party-box-hold #selected-move-1')) {
                // document.getElementById('selected-move-1').innerHTML = insertJSON
                $('#party-box-hold #selected-move-1').append(insertJSON);
                $('#add-party-button').trigger('partyBoxHoldChange');
              } else if (isEmpty('#party-box-hold #selected-move-2')) {
                // document.getElementById('selected-move-2').innerHTML = insertJSON
                $('#party-box-hold #selected-move-2').append(insertJSON);
                $('#add-party-button').trigger('partyBoxHoldChange');
              } else if (isEmpty('#party-box-hold #selected-move-3')) {
                // document.getElementById('selected-move-3').innerHTML = insertJSON
                $('#party-box-hold #selected-move-3').append(insertJSON);
                $('#add-party-button').trigger('partyBoxHoldChange');
              } else if (isEmpty('#party-box-hold #selected-move-4')) {
                // document.getElementById('selected-move-4').innerHTML = insertJSON
                $('#party-box-hold #selected-move-4').append(insertJSON);
                $('#add-party-button').trigger('partyBoxHoldChange');
              } else {}
            }


          });


        });
      });
    });
  }


  // Selection Process - After "Add To Party"
  $(function (_SelectionProcess2) {
    $('#add-party-button').on('partyBoxHoldChange', function() {
      $('#add-party-button').attr('disabled', false);
      function isEmpty(inElement) {
        return !$.trim($(inElement).html())
      }
      function isNotEmpty(inElement) {
        return !isEmpty(inElement)
      }

      function nextOpenPartyBox() {
        if (isEmpty('#party-box-1')) {
          return '#party-box-1'
        } else if (isEmpty('#party-box-2')) {
          return '#party-box-2'
        } else if (isEmpty('#party-box-3')) {
          return '#party-box-3'
        } else if (isEmpty('#party-box-4')) {
          return '#party-box-4'
        } else if (isEmpty('#party-box-5')) {
          return '#party-box-5'
        } else if (isEmpty('#party-box-6')) {
          return '#party-box-6'
        }
      }

      var pokemonSelected = false;
      var moveSelected = false;
      var partyFull = true;

      if (isNotEmpty('#party-box-hold')) {
        pokemonSelected = true;
      }

      if (isNotEmpty('#party-box-hold #selected-move-1') || isNotEmpty('#party-box-hold #selected-move-2') || isNotEmpty('#party-box-hold #selected-move-3') || isNotEmpty('#party-box-hold #selected-move-4')) {
        moveSelected = true;
      }

      if (isEmpty('#party-box-1') || isEmpty('#party-box-2') || isEmpty('#party-box-3') || isEmpty('#party-box-4') || isEmpty('#party-box-5') || isEmpty('#party-box-6')) {
        partyFull = false;
      }

      $('#add-party-button').on('click', function() {
          if ((pokemonSelected == true) && (moveSelected == true) && (partyFull == false)) {
          var openPartyBox = nextOpenPartyBox();
          $(openPartyBox).append($('#party-box-hold').html());
          $('#party-box-hold').empty();
        } else { }
      });

      // Save Party
      $('#save-party-button').on('click', function( event, ui ) {
        function isEmpty(inElement) {
          return !$.trim($(inElement).html())
        }
        function isNotEmpty(inElement) {
          return !isEmpty(inElement)
        }
        function partyBoxDataCollect(boxNum) {
          var pkName, pkMove1, pkMove2, pkMove3, pkMove4;
          if (isNotEmpty('#party-box-' + boxNum)) {
            pkName = $('#party-box-' + boxNum + ' .moves-poke-box-div').attr('pokemon-name');
            if(isNotEmpty('#party-box-' + boxNum + ' #selected-move-1')) {
              pkMove1 = $('#party-box-' + boxNum + ' #selected-move-1 > div').attr('move-name');
            } else {
              pkMove1 = "N/A"
            }
            if(isNotEmpty('#party-box-' + boxNum + ' #selected-move-2')) {
              pkMove2 = $('#party-box-' + boxNum + ' #selected-move-2 > div').attr('move-name');
            } else {
              pkMove2 = "N/A"
            }
            if(isNotEmpty('#party-box-' + boxNum + ' #selected-move-3')) {
              pkMove3 = $('#party-box-' + boxNum + ' #selected-move-3 > div').attr('move-name');
            } else {
              pkMove3 = "N/A"
            }
            if(isNotEmpty('#party-box-' + boxNum + ' #selected-move-4')) {
              pkMove4 = $('#party-box-' + boxNum + ' #selected-move-4 > div').attr('move-name');
            } else {
              pkMove4 = "N/A"
            }
            
          } else {
            pkName = "N/A"
            pdMove1 = "N/A"
            pdMove2 = "N/A"
            pdMove3 = "N/A"
            pdMove4 = "N/A"
          }
          return [pkName, pkMove1, pkMove2, pkMove3, pkMove4];
        }
        var pkN1, pkM11, pkM12, pkM13, pkM14;
        var pkN2, pkM21, pkM22, pkM23, pkM24;
        var pkN3, pkM31, pkM32, pkM33, pkM34;
        var pkN4, pkM41, pkM42, pkM43, pkM44;
        var pkN5, pkM51, pkM52, pkM53, pkM54;
        var pkN6, pkM61, pkM62, pkM63, pkM64;

        pkN1 = partyBoxDataCollect(1)[0];
        pkM11 = partyBoxDataCollect(1)[1];
        pkM12 = partyBoxDataCollect(1)[2];
        pkM13 = partyBoxDataCollect(1)[3];
        pkM14 = partyBoxDataCollect(1)[4];
        
        pkN2 = partyBoxDataCollect(2)[0];
        pkM21 = partyBoxDataCollect(2)[1];
        pkM22 = partyBoxDataCollect(2)[2];
        pkM23 = partyBoxDataCollect(2)[3];
        pkM24 = partyBoxDataCollect(2)[4];
        
        pkN3 = partyBoxDataCollect(3)[0];
        pkM31 = partyBoxDataCollect(3)[1];
        pkM32 = partyBoxDataCollect(3)[2];
        pkM33 = partyBoxDataCollect(3)[3];
        pkM34 = partyBoxDataCollect(3)[4];
        
        pkN4 = partyBoxDataCollect(4)[0];
        pkM41 = partyBoxDataCollect(4)[1];
        pkM42 = partyBoxDataCollect(4)[2];
        pkM43 = partyBoxDataCollect(4)[3];
        pkM44 = partyBoxDataCollect(4)[4];
        
        pkN5 = partyBoxDataCollect(5)[0];
        pkM51 = partyBoxDataCollect(5)[1];
        pkM52 = partyBoxDataCollect(5)[2];
        pkM53 = partyBoxDataCollect(5)[3];
        pkM54 = partyBoxDataCollect(5)[4];
        
        pkN6 = partyBoxDataCollect(6)[0];
        pkM61 = partyBoxDataCollect(6)[1];
        pkM62 = partyBoxDataCollect(6)[2];
        pkM63 = partyBoxDataCollect(6)[3];
        pkM64 = partyBoxDataCollect(6)[4];
        
        var sJSON = JSON.stringify({"party": [
          { "pokemon1": 
            { "pokemonName":pkN1, "move1":pkM11, "move2":pkM12, "move3":pkM13, "move4":pkM14 }},
          { "pokemon2": 
            { "pokemonName":pkN2, "move1":pkM21, "move2":pkM22, "move3":pkM23, "move4":pkM24 }},
          { "pokemon3": 
            { "pokemonName":pkN3, "move1":pkM31, "move2":pkM32, "move3":pkM33, "move4":pkM34 }},
          { "pokemon4": 
            { "pokemonName":pkN4, "move1":pkM41, "move2":pkM42, "move3":pkM43, "move4":pkM44 }},
          { "pokemon5": 
            { "pokemonName":pkN5, "move1":pkM51, "move2":pkM52, "move3":pkM53, "move4":pkM54 }},
          { "pokemon6": 
            { "pokemonName":pkN6, "move1":pkM61, "move2":pkM62, "move3":pkM63, "move4":pkM64 }}
        ]});
        console.log(ui)
        // $.ajax({
        //   type: 'PUT',
        //   url: ,
        //   dataType: 'json',
        //   data: sJSON
        // });
      });
    });
  });

  

    

  // Pokemon Search Box Filter
  $(function (_PokemonSearchBoxFilter) {
    $("#input-pokemon").on("input", function() {
      var currentInput = $(this).val().toLowerCase();
      if (currentInput == "") {
        $('#moves-poke-box-ol > li').hide();
      } else {
        $('#moves-poke-box-ol > li:not(:contains(' + currentInput + '))').hide(); 
        $('#moves-poke-box-ol > li:contains(' + currentInput + ')').show();  
      }
    });
  });

  // Moves Search Box Filter
  $(function (_MovesSearchBoxFilter) {
    $("#input-moves").on("input", function() {
      var currentInput = $(this).val().toLowerCase();
      if (currentInput == "") {
        $('#move-box-ul > li').hide();
      } else {
        $('#move-box-ul > li:not(:contains(' + currentInput + '))').hide(); 
        $('#move-box-ul > li:contains(' + currentInput + ')').show();  
      }
    });
  });

    


  
</script>